<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment - BRAVE X FIT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <!-- Razorpay Integration -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body class="bg-gray-50">
    <nav class="bg-white shadow-md">
        <div class="container mx-auto px-6 py-3">
            <div class="flex items-center">
                <i data-feather="activity" class="text-orange-500 h-8 w-8 mr-2"></i>
                <span class="text-xl font-bold text-gray-800">BRAVE X FIT - Payment</span>
            </div>
        </div>
    </nav>

    <section class="py-12">
        <div class="container mx-auto px-6 max-w-4xl">
            <div class="bg-white rounded-lg shadow-md p-8">
                <h2 class="text-3xl font-bold mb-8 text-center">Complete Your Booking</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Order Summary -->
                    <div>
                        <h3 class="text-xl font-bold mb-4">Order Summary</h3>
                        <div id="orderSummary" class="bg-gray-50 p-4 rounded-lg mb-4">
                            <!-- Dynamic content -->
                        </div>
                        
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <h4 class="font-bold mb-2">ðŸ“ž Need Help?</h4>
                            <p>Call us: <span class="font-bold">9535254331</span></p>
                            <p>Email: info@bravexfit.com</p>
                        </div>
                    </div>

                    <!-- Payment Form -->
                    <div>
                        <h3 class="text-xl font-bold mb-4">Payment Details</h3>
                        <form id="paymentForm" class="space-y-4">
                            <div>
                                <label class="block text-gray-700 mb-2">Full Name</label>
                                <input type="text" id="customerName" class="w-full p-3 border rounded-lg" required>
                            </div>
                            
                            <div>
                                <label class="block text-gray-700 mb-2">Email</label>
                                <input type="email" id="customerEmail" class="w-full p-3 border rounded-lg" required>
                            </div>
                            
                            <div>
                                <label class="block text-gray-700 mb-2">Phone</label>
                                <input type="tel" id="customerPhone" class="w-full p-3 border rounded-lg" required>
                            </div>

                            <div class="border-t pt-4">
                                <div class="flex justify-between mb-2">
                                    <span>Program Fee:</span>
                                    <span id="programFee">â‚¹0</span>
                                </div>
                                <div class="flex justify-between mb-2">
                                    <span>GST (18%):</span>
                                    <span id="gstAmount">â‚¹0</span>
                                </div>
                                <div class="flex justify-between font-bold text-lg">
                                    <span>Total Amount:</span>
                                    <span id="totalAmount">â‚¹0</span>
                                </div>
                            </div>

                            <button type="submit" class="w-full bg-green-500 text-white py-3 rounded-lg font-bold hover:bg-green-600 transition">
                                Pay Now â‚¹<span id="payAmount">0</span>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Get booking details from URL
        const urlParams = new URLSearchParams(window.location.search);
        const programId = urlParams.get('program');
        const bookingDate = urlParams.get('date');
        const bookingTime = urlParams.get('time');

        // Sample program data (in real app, fetch from backend)
        const programs = {
            1: { name: "UFC Training", price: 2000 },
            2: { name: "Zumba Classes", price: 1500 },
            3: { name: "Body Building", price: 1800 },
            4: { name: "Steam Bath", price: 500 },
            5: { name: "Personal Training", price: 2500 },
            6: { name: "Classical Dance", price: 1200 }
        };

        const program = programs[programId];
        const programFee = program.price;
        const gstAmount = programFee * 0.18;
        const totalAmount = programFee + gstAmount;

        // Update UI
        document.getElementById('orderSummary').innerHTML = `
            <p><strong>Program:</strong> ${program.name}</p>
            <p><strong>Date:</strong> ${bookingDate}</p>
            <p><strong>Time:</strong> ${bookingTime}</p>
            <p><strong>Session Fee:</strong> â‚¹${programFee}</p>
        `;

        document.getElementById('programFee').textContent = `â‚¹${programFee}`;
        document.getElementById('gstAmount').textContent = `â‚¹${gstAmount.toFixed(2)}`;
        document.getElementById('totalAmount').textContent = `â‚¹${totalAmount.toFixed(2)}`;
        document.getElementById('payAmount').textContent = totalAmount.toFixed(2);

        // Razorpay Payment Integration
        document.getElementById('paymentForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const name = document.getElementById('customerName').value;
            const email = document.getElementById('customerEmail').value;
            const phone = document.getElementById('customerPhone').value;

            // In real app, make API call to create order
            const options = {
                key: "YOUR_RAZORPAY_KEY_ID", // Replace with your Razorpay key
                amount: totalAmount * 100, // Amount in paise
                currency: "INR",
                name: "BRAVE X FIT",
                description: `Booking for ${program.name}`,
                image: "/logo.png",
                handler: function(response) {
                    // Payment success - save booking to database
                    saveBooking(response.razorpay_payment_id);
                },
                prefill: {
                    name: name,
                    email: email,
                    contact: phone
                },
                theme: {
                    color: "#f97316"
                }
            };

            const rzp = new Razorpay(options);
            rzp.open();
        });

        function saveBooking(paymentId) {
            // Send booking data to backend
            const bookingData = {
                programId: programId,
                programName: program.name,
                bookingDate: bookingDate,
                bookingTime: bookingTime,
                customerName: document.getElementById('customerName').value,
                customerEmail: document.getElementById('customerEmail').value,
                customerPhone: document.getElementById('customerPhone').value,
                amount: totalAmount,
                paymentId: paymentId,
                status: 'confirmed'
            };

            // In real app, make API call to save booking
            console.log('Booking saved:', bookingData);
            
            // Redirect to success page
            window.location.href = `booking-success.html?booking=${paymentId}`;
        }

        feather.replace();
    </script>
</body>
</html>